var slidingTabsDirective=angular.module("ionic").directive("ionSlideTabs",["$timeout","$compile","$interval","$ionicSlideBoxDelegate","$ionicScrollDelegate","$ionicGesture",function(i,e,t,n,a,l){return{require:"^ionSlideBox",restrict:"A",link:function(i,t,l,s){var o,r,c,f,b,u,h,v={slideTabsScrollable:!0},p=function(){angular.isDefined(l.slideTabsScrollable)&&"false"===l.slideTabsScrollable&&(v.slideTabsScrollable=!1),v.slideTabsScrollable?(c="ion-slide-tabs-handle-"+Math.floor(1e4*Math.random()+1),h=angular.element('<ion-scroll delegate-handle="'+c+'" class="slidingTabs" direction="x" scrollbar-x="false"><ul> </ul> <div class="tab-indicator-wrapper"><div class="tab-indicator"></div></div> </ion-scroll>')):h=angular.element('<div class="slidingTabs"><ul> </ul> <div class="tab-indicator-wrapper"><div class="tab-indicator"></div></div> </div>'),u=$(t);var s=e(h);u.before(h),s(i),f=h.find("li"),b=h.find(".tab-indicator");var d=u.attr("delegate-handle"),p=h.attr("delegate-handle");o=n,d&&(o=o.$getByHandle(d)),m(o.currentIndex(),o.currentIndex(),1),v.slideTabsScrollable&&(r=a,p&&(r=r.$getByHandle(p))),g(),T(),k()},g=function(){ionic.onGesture("dragleft",i.onSlideMove,u[0]),ionic.onGesture("dragright",i.onSlideMove,u[0]),ionic.onGesture("release",i.onSlideChange,u[0])},T=function(){tabsList=h.find("ul");var i=0;tabsList.find("li").each(function(e){var t=$(this);i+=t.outerWidth(),ionic.on("click",function(i){S(i,t),o.slide(e),k()},this)}),v.slideTabsScrollable?tabsList.closest(".scroll").css("width",i+1):tabsList.find("li").css("width",tabsList.width()/tabsList.find("li").size()),k()},S=function(i,e){0==e.find(".ink").length&&e.prepend("<span class='ink'></span>"),ink=e.find(".ink"),ink.removeClass("animate"),ink.height()||ink.width()||(d=Math.max(e.outerWidth(),e.outerHeight()),ink.css({height:d,width:d})),x=i.pageX-e.offset().left-ink.width()/2,y=i.pageY-e.offset().top-ink.height()/2,ink.css({top:y+"px",left:x+"px"}).addClass("animate")},k=function(){var i=o.currentIndex(),e=$(f[i]),t=e.prop("offsetLeft"),n=e.outerWidth();if(b.css({"-webkit-transition-duration":"300ms","-webkit-transform":"translate("+t+"px,0px)",width:n+"px"}),v.slideTabsScrollable&&r){var a=40;r.scrollTo(t-a,0,!0)}f.removeClass("tab-active"),e.addClass("tab-active")},m=function(i,e,t){if(!(0==i&&e==o.slidesCount()-1||0==e&&i==o.slidesCount()-1)){var n=$(f[e]),a=$(f[i]),l=n.prop("offsetLeft"),s=a.prop("offsetLeft"),d=Math.abs(l-s),c=n.outerWidth(),u=a.outerWidth(),h=c-u,p=0,g=0;if(i>e?(p=l-d*(t-1),g=c-h*(1-t)):e>i&&(p=l+d*(t-1),g=c+h*(t-1)),b.css({"-webkit-transition-duration":"0ms","-webkit-transform":"translate("+p+"px,0px)",width:g+"px"}),v.slideTabsScrollable&&r){var T=40;r.scrollTo(p-T,0,!1)}}};i.addTabContent=function(i){var e=$("<li></li>").html(i);h.find("ul").append(e),f=h.find("li"),k(),T()},i.onSlideChange=function(i){k()},i.onSlideMove=function(){var i=u.find(".slider-slide"),e=o.currentIndex(),t=$(i[e]),n=(e+1)%i.size();t.offset().left>t.closest(".slider").offset().left&&(n=e-1,0>n&&(n=i.size()-1));var a=$(i[n]),l=Math.abs(t.offset().left/a.closest(".slider").width());m(e,n,l)},p()},controller:["$scope",function(e){this.addTab=function(t){i(function(){e.addTabContent&&e.addTabContent(t)})}}]}}]);slidingTabsDirective.directive("ionSlideTabLabel",[function(){return{require:"^ionSlideTabs",link:function(i,e,t,n){n.addTab(t.ionSlideTabLabel)}}}]);